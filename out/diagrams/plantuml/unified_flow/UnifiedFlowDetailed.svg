<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="6562px" preserveAspectRatio="none" style="width:5241px;height:6562px;background:#FFFFFF;" version="1.1" viewBox="0 0 5241 6562" width="5241px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="881.1875" x="2175.9063" y="29.5332">Flujo Unificado Completo (Servidor Inicializaci&#243;n &#8594; Autenticaci&#243;n &#8594; Mensajer&#237;a &#8594; Archivos &#8594; Videollamada &#8594; Logout / Cierre)</text><rect fill="#EEEEEE" height="6293.75" style="stroke:#181818;stroke-width:0.5;" width="1589.5" x="3618.5" y="255.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="121" x="4352.75" y="269.1982">Handlers (Strategy)</text><rect fill="none" height="299.3516" style="stroke:#000000;stroke-width:1.5;" width="3072" x="826.5" y="1315.5078"/><rect fill="none" height="246.6484" style="stroke:#000000;stroke-width:1.5;" width="2922" x="826.5" y="1989.7266"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="3316" x="826.5" y="3318.3281"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="1570" x="2769" y="3698.5469"/><rect fill="none" height="230.8125" style="stroke:#000000;stroke-width:1.5;" width="4651" x="422" y="4586.0391"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="1743" x="2769" y="5118.0156"/><rect fill="none" height="141.7578" style="stroke:#000000;stroke-width:1.5;" width="2772" x="2452" y="5528.5859"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="2445" x="2769" y="5614.6406"/><rect fill="none" height="247.8125" style="stroke:#000000;stroke-width:1.5;" width="1886.5" x="1116.5" y="5759.0469"/><rect fill="none" height="141.7578" style="stroke:#000000;stroke-width:1.5;" width="1866.5" x="1126.5" y="5814.75"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="1846.5" x="1136.5" y="5900.8047"/><rect fill="none" height="154.0781" style="stroke:#000000;stroke-width:1.5;" width="843.5" x="2769" y="6279.3203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="32" x2="32" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="247" x2="247" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="500" x2="500" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="919.5" x2="919.5" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1237.5" x2="1237.5" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1793" x2="1793" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2050" x2="2050" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2356" x2="2356" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2615" x2="2615" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2876" x2="2876" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3095" x2="3095" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3514.5" x2="3514.5" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3680.5" x2="3680.5" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3818.5" x2="3818.5" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="3955.5" x2="3955.5" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4077.5" x2="4077.5" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4254" x2="4254" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4420" x2="4420" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4600" x2="4600" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4794" x2="4794" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="4981" x2="4981" y1="333.3125" y2="6555.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="5138" x2="5138" y1="333.3125" y2="6555.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="29" x="15" y="330.2363">User</text><ellipse cx="32.5" cy="271.2031" fill="#E2E2F0" rx="16" ry="16" style="stroke:#181818;stroke-width:0.5;"/><path d="M32.5,291.2031 C36.5,291.2031 39.5,291.2031 43.5,287.2031 C51.5,287.2031 59.5,295.2031 59.5,303.2031 L59.5,307.2031 C59.5,311.2031 55.5,315.2031 51.5,315.2031 L13.5,315.2031 C9.5,315.2031 5.5,311.2031 5.5,307.2031 L5.5,303.2031 C5.5,295.2031 13.5,287.2031 21.5,287.2031 C25.5,291.2031 28.5,291.2031 32.5,291.2031 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149" x="173" y="283.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="121" x="187" y="304.627">Browser / Frontend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="135" x="180" y="322.2363">(index.html, styles, js)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="444" y="283.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="99" x="451" y="304.627">ChatApplication</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="58" x="471.5" y="322.2363">(Facade)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="848.5" y="283.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="128" x="855.5" y="304.627">WebSocketManager</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="69" x="885" y="322.2363">(Singleton)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="158" x="1158.5" y="283.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="144" x="1165.5" y="304.627">ChatWebSocketServer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="124" x="1175.5" y="322.2363">(WebSocketServer)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="253" x="1667" y="283.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="41" x="1773" y="304.627">Config</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="239" x="1674" y="322.2363">(Lee JAVA_HOST / JAVA_WS_PORT)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="192" x="1954" y="283.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="91" x="2004.5" y="304.627">DBConnection</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="178" x="1961" y="322.2363">(MysqlDataSource Provider)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168" x="2272" y="283.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="125" x="2293.5" y="304.627">MessageDispatcher</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="154" x="2279" y="322.2363">(Registro type&#8594;handler)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="283" x="2474" y="283.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="105" x="2563" y="304.627">MessageContext</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="269" x="2481" y="322.2363">(Sessions, VideoRoomUsers, DAOs, Audit)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170" x="2791" y="283.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="79" x="2836.5" y="304.627">AuditService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="156" x="2798" y="322.2363">(Capa dominio auditor&#237;a)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="3039" y="283.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="59" x="3065.5" y="304.627">UserDAO</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="98" x="3046" y="322.2363">(auth / register)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="151" x="3439.5" y="283.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="69" x="3480.5" y="304.627">ActionDAO</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="137" x="3446.5" y="322.2363">(insertAction / details)</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="3634.5" y="300.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="78" x="3641.5" y="322.2363">AuthHandler</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="3760.5" y="300.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="102" x="3767.5" y="322.2363">RegisterHandler</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="3910.5" y="300.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="76" x="3917.5" y="322.2363">TextHandler</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="4034.5" y="300.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="72" x="4041.5" y="322.2363">FileHandler</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="4192" y="300.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="111" x="4199" y="322.2363">JoinRoomHandler</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="4351" y="300.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="125" x="4358" y="322.2363">LeaveRoomHandler</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="4524" y="300.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="139" x="4531" y="322.2363">WebRTCOfferHandler</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="167" x="4711" y="300.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="153" x="4718" y="322.2363">WebRTCAnswerHandler</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="139" x="4912" y="300.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="125" x="4919" y="322.2363">WebRTCIceHandler</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="5085" y="300.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="93" x="5092" y="322.2363">LogoutHandler</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5234" x="0" y="364.4883"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="364.4883" y2="364.4883"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="367.4883" y2="367.4883"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="206" x="2514" y="353.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="188" x="2520" y="370.8076">(A) Inicializaci&#243;n del Servidor</text><polygon fill="#444444" points="1781.5,406.0156,1791.5,410.0156,1781.5,414.0156,1785.5,410.0156" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="1787.5" y1="410.0156" y2="410.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="1244.5" y="405.1592">getHost() / getWsPort()</text><polygon fill="#444444" points="2038,436.3672,2048,440.3672,2038,444.3672,2042,440.3672" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2044" y1="440.3672" y2="440.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1244.5" y="435.5107">getDataSource()</text><line style="stroke:#444444;stroke-width:1.0;" x1="2050" x2="2092" y1="470.7188" y2="470.7188"/><line style="stroke:#444444;stroke-width:1.0;" x1="2092" x2="2092" y1="470.7188" y2="483.7188"/><line style="stroke:#444444;stroke-width:1.0;" x1="2051" x2="2092" y1="483.7188" y2="483.7188"/><polygon fill="#444444" points="2061,479.7188,2051,483.7188,2061,487.7188,2057,483.7188" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="292" x="2057" y="465.8623">Crea MysqlDataSource (host, port, db, user, pass)</text><polygon fill="#444444" points="2864,510.0703,2874,514.0703,2864,518.0703,2868,514.0703" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2870" y1="514.0703" y2="514.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="338" x="1244.5" y="509.2139">recordSystem("WebSocket server ON ws://HOST:PORT/")</text><path d="M2881,527.0703 L2881,586.0703 L3449,586.0703 L3449,537.0703 L3439,527.0703 L2881,527.0703 " fill="#FFFFEE" style="stroke:#CCCC99;stroke-width:0.5;"/><path d="M3439,527.0703 L3439,537.0703 L3449,537.0703 L3439,527.0703 " fill="#FFFFEE" style="stroke:#CCCC99;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="2887" y="545.5654">recordSystem:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="539" x="2895" y="561.917">1) ActionDAO.insertAction("SYSTEM", room="global", actor=NULL, server_generated=TRUE)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="302" x="2895" y="578.2686">2) ActionDAO.insertTextDetails(action_id, message)</text><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="1279.5" y1="613.4766" y2="613.4766"/><line style="stroke:#444444;stroke-width:1.0;" x1="1279.5" x2="1279.5" y1="613.4766" y2="626.4766"/><line style="stroke:#444444;stroke-width:1.0;" x1="1238.5" x2="1279.5" y1="626.4766" y2="626.4766"/><polygon fill="#444444" points="1248.5,622.4766,1238.5,626.4766,1248.5,630.4766,1244.5,626.4766" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="542" x="1244.5" y="608.6201">Construye MessageContext(sessions, videoRoomUsers, UserDAO, ActionDAO, AuditService)</text><polygon fill="#444444" points="2344,652.8281,2354,656.8281,2344,660.8281,2348,656.8281" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2350" y1="656.8281" y2="656.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="1244.5" y="651.9717">register(AuthHandler,...,LogoutHandler)</text><line style="stroke:#444444;stroke-width:1.0;" x1="2356" x2="2398" y1="687.1797" y2="687.1797"/><line style="stroke:#444444;stroke-width:1.0;" x1="2398" x2="2398" y1="687.1797" y2="700.1797"/><line style="stroke:#444444;stroke-width:1.0;" x1="2357" x2="2398" y1="700.1797" y2="700.1797"/><polygon fill="#444444" points="2367,696.1797,2357,700.1797,2367,704.1797,2363,700.1797" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="2363" y="682.3232">Map&lt;type,handler&gt; poblado</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5234" x="0" y="729.3555"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="729.3555" y2="729.3555"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="732.3555" y2="732.3555"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="290" x="2472" y="718.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="272" x="2478" y="735.6748">(B) Carga Frontend y Conexi&#243;n WebSocket</text><polygon fill="#444444" points="235.5,770.8828,245.5,774.8828,235.5,778.8828,239.5,774.8828" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="32.5" x2="241.5" y1="774.8828" y2="774.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="39.5" y="770.0264">Abre URL (HTTP GET)</text><polygon fill="#444444" points="488.5,801.2344,498.5,805.2344,488.5,809.2344,492.5,805.2344" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="247.5" x2="494.5" y1="805.2344" y2="805.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="254.5" y="800.3779">init()</text><polygon fill="#444444" points="907.5,831.5859,917.5,835.5859,907.5,839.5859,911.5,835.5859" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="913.5" y1="835.5859" y2="835.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="507.5" y="830.7295">connect(wsUrl)</text><polygon fill="#444444" points="1225.5,861.9375,1235.5,865.9375,1225.5,869.9375,1229.5,865.9375" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="919.5" x2="1231.5" y1="865.9375" y2="865.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="926.5" y="861.0811">Handshake WebSocket (HTTP Upgrade)</text><polygon fill="#444444" points="2864,892.2891,2874,896.2891,2864,900.2891,2868,896.2891" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2870" y1="896.2891" y2="896.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="1244.5" y="891.4326">recordSystem("Nueva conexi&#243;n WS: IP:PORT")</text><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="1279.5" y1="926.6406" y2="926.6406"/><line style="stroke:#444444;stroke-width:1.0;" x1="1279.5" x2="1279.5" y1="926.6406" y2="939.6406"/><line style="stroke:#444444;stroke-width:1.0;" x1="1238.5" x2="1279.5" y1="939.6406" y2="939.6406"/><polygon fill="#444444" points="1248.5,935.6406,1238.5,939.6406,1248.5,943.6406,1244.5,939.6406" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="329" x="1244.5" y="921.7842">Espera mensaje 'auth' o 'register' antes de marcar sesi&#243;n</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5234" x="0" y="968.8164"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="968.8164" y2="968.8164"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="971.8164" y2="971.8164"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="282" x="2476" y="957.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="264" x="2482" y="975.1357">(C1) Registro de Usuario (flujo alternativo)</text><polygon fill="#444444" points="235.5,1010.3438,245.5,1014.3438,235.5,1018.3438,239.5,1014.3438" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="32.5" x2="241.5" y1="1014.3438" y2="1014.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="39.5" y="1009.4873">Completa formulario registro</text><polygon fill="#444444" points="488.5,1040.6953,498.5,1044.6953,488.5,1048.6953,492.5,1044.6953" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="247.5" x2="494.5" y1="1044.6953" y2="1044.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229" x="254.5" y="1039.8389">register(username, fullName, password)</text><polygon fill="#444444" points="907.5,1071.0469,917.5,1075.0469,907.5,1079.0469,911.5,1075.0469" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="913.5" y1="1075.0469" y2="1075.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="378" x="507.5" y="1070.1904">send({"type":"register","username":U,"fullName":F,"password":P})</text><polygon fill="#444444" points="1225.5,1101.3984,1235.5,1105.3984,1225.5,1109.3984,1229.5,1105.3984" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="919.5" x2="1231.5" y1="1105.3984" y2="1105.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="926.5" y="1100.542">Frame texto JSON</text><polygon fill="#444444" points="2344,1131.75,2354,1135.75,2344,1139.75,2348,1135.75" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2350" y1="1135.75" y2="1135.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="1244.5" y="1130.8936">dispatch("register")</text><polygon fill="#444444" points="3806.5,1162.1016,3816.5,1166.1016,3806.5,1170.1016,3810.5,1166.1016" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2356" x2="3812.5" y1="1166.1016" y2="1166.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="2363" y="1161.2451">handle(ctx,conn,payload)</text><polygon fill="#444444" points="3106,1192.4531,3096,1196.4531,3106,1200.4531,3102,1196.4531" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="3100" x2="3817.5" y1="1196.4531" y2="1196.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="256" x="3112" y="1191.5967">registerUser(username, fullName, password)</text><polygon fill="#444444" points="2061,1222.8047,2051,1226.8047,2061,1230.8047,2057,1226.8047" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2055" x2="3094" y1="1226.8047" y2="1226.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="2067" y="1221.9482">getConnection()</text><line style="stroke:#444444;stroke-width:1.0;" x1="3095" x2="3137" y1="1257.1563" y2="1257.1563"/><line style="stroke:#444444;stroke-width:1.0;" x1="3137" x2="3137" y1="1257.1563" y2="1270.1563"/><line style="stroke:#444444;stroke-width:1.0;" x1="3096" x2="3137" y1="1270.1563" y2="1270.1563"/><polygon fill="#444444" points="3106,1266.1563,3096,1270.1563,3106,1274.1563,3102,1270.1563" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="3102" y="1252.2998">INSERT INTO users(...)</text><polygon fill="#444444" points="3806.5,1296.5078,3816.5,1300.5078,3806.5,1304.5078,3810.5,1300.5078" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="3095" x2="3812.5" y1="1300.5078" y2="1300.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="3102" y="1295.6514">User (nuevo) | null (dup)</text><path d="M826.5,1315.5078 L887.5,1315.5078 L887.5,1323.8594 L877.5,1333.8594 L826.5,1333.8594 L826.5,1315.5078 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="299.3516" style="stroke:#000000;stroke-width:1.5;" width="3072" x="826.5" y="1315.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="841.5" y="1330.0029">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="128" x="902.5" y="1328.9268">[Usuario nuevo creado]</text><polygon fill="#444444" points="2626.5,1352.2109,2616.5,1356.2109,2626.5,1360.2109,2622.5,1356.2109" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2620.5" x2="3817.5" y1="1356.2109" y2="1356.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="2632.5" y="1351.3545">sessions.put(conn, user)</text><polygon fill="#444444" points="2887,1382.5625,2877,1386.5625,2887,1390.5625,2883,1386.5625" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2881" x2="3817.5" y1="1386.5625" y2="1386.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="269" x="2893" y="1381.7061">recordSystem("Usuario registrado: username")</text><polygon fill="#444444" points="2887,1412.9141,2877,1416.9141,2887,1420.9141,2883,1416.9141" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2881" x2="3817.5" y1="1416.9141" y2="1416.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="2893" y="1412.0576">recordLogin(username)</text><path d="M2881,1429.9141 L2881,1471.9141 L3245,1471.9141 L3245,1439.9141 L3235,1429.9141 L2881,1429.9141 " fill="#FFFFEE" style="stroke:#CCCC99;stroke-width:0.5;"/><path d="M3235,1429.9141 L3235,1439.9141 L3245,1439.9141 L3235,1429.9141 " fill="#FFFFEE" style="stroke:#CCCC99;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="2887" y="1448.4092">recordLogin:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="335" x="2895" y="1464.7607">ActionDAO.insertAction("LOGIN", actor_user_id=users.id)</text><polygon fill="#444444" points="1248.5,1495.9688,1238.5,1499.9688,1248.5,1503.9688,1244.5,1499.9688" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1242.5" x2="3817.5" y1="1499.9688" y2="1499.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="1254.5" y="1495.1123">broadcast({"type":"userlist", users})</text><polygon fill="#444444" points="930.5,1526.3203,920.5,1530.3203,930.5,1534.3203,926.5,1530.3203" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="1236.5" y1="1530.3203" y2="1530.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="936.5" y="1525.4639">Entrega frame userlist</text><polygon fill="#444444" points="930.5,1556.6719,920.5,1560.6719,930.5,1564.6719,926.5,1560.6719" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="3817.5" y1="1560.6719" y2="1560.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="253" x="936.5" y="1555.8154">{"type":"register_ok","username":username}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="826.5" x2="3898.5" y1="1569.6719" y2="1569.6719"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="121" x="831.5" y="1581.0908">[Username duplicado]</text><polygon fill="#444444" points="930.5,1602.8594,920.5,1606.8594,930.5,1610.8594,926.5,1606.8594" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="3817.5" y1="1606.8594" y2="1606.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="318" x="936.5" y="1602.0029">{"type":"register_fail","msg":"username already exists"}</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5234" x="0" y="1643.0352"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="1643.0352" y2="1643.0352"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="1646.0352" y2="1646.0352"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="239" x="2497.5" y="1631.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="221" x="2503.5" y="1649.3545">(C2) Autenticaci&#243;n (login existente)</text><polygon fill="#444444" points="235.5,1684.5625,245.5,1688.5625,235.5,1692.5625,239.5,1688.5625" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="32.5" x2="241.5" y1="1688.5625" y2="1688.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="39.5" y="1683.7061">Ingresa credenciales login</text><polygon fill="#444444" points="488.5,1714.9141,498.5,1718.9141,488.5,1722.9141,492.5,1718.9141" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="247.5" x2="494.5" y1="1718.9141" y2="1718.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="254.5" y="1714.0576">login(username,password)</text><polygon fill="#444444" points="907.5,1745.2656,917.5,1749.2656,907.5,1753.2656,911.5,1749.2656" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="913.5" y1="1749.2656" y2="1749.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="507.5" y="1744.4092">authenticate(username,password)</text><polygon fill="#444444" points="1225.5,1775.6172,1235.5,1779.6172,1225.5,1783.6172,1229.5,1779.6172" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="919.5" x2="1231.5" y1="1779.6172" y2="1779.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244" x="926.5" y="1774.7607">{"type":"auth","username":u,"password":p}</text><polygon fill="#444444" points="2344,1805.9688,2354,1809.9688,2344,1813.9688,2348,1809.9688" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2350" y1="1809.9688" y2="1809.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1244.5" y="1805.1123">dispatch("auth")</text><polygon fill="#444444" points="3668.5,1836.3203,3678.5,1840.3203,3668.5,1844.3203,3672.5,1840.3203" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2356" x2="3674.5" y1="1840.3203" y2="1840.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="2363" y="1835.4639">handle(ctx,conn,payload)</text><polygon fill="#444444" points="3106,1866.6719,3096,1870.6719,3106,1874.6719,3102,1870.6719" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="3100" x2="3679.5" y1="1870.6719" y2="1870.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="3112" y="1865.8154">authenticate(username,password)</text><polygon fill="#444444" points="2061,1897.0234,2051,1901.0234,2061,1905.0234,2057,1901.0234" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2055" x2="3094" y1="1901.0234" y2="1901.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="2067" y="1896.167">getConnection()</text><line style="stroke:#444444;stroke-width:1.0;" x1="3095" x2="3137" y1="1931.375" y2="1931.375"/><line style="stroke:#444444;stroke-width:1.0;" x1="3137" x2="3137" y1="1931.375" y2="1944.375"/><line style="stroke:#444444;stroke-width:1.0;" x1="3096" x2="3137" y1="1944.375" y2="1944.375"/><polygon fill="#444444" points="3106,1940.375,3096,1944.375,3106,1948.375,3102,1944.375" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="406" x="3102" y="1926.5186">SELECT * FROM users WHERE username=? AND password_hash=?</text><polygon fill="#444444" points="3668.5,1970.7266,3678.5,1974.7266,3668.5,1978.7266,3672.5,1974.7266" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="3095" x2="3674.5" y1="1974.7266" y2="1974.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="3102" y="1969.8701">User | null</text><path d="M826.5,1989.7266 L887.5,1989.7266 L887.5,1998.0781 L877.5,2008.0781 L826.5,2008.0781 L826.5,1989.7266 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="246.6484" style="stroke:#000000;stroke-width:1.5;" width="2922" x="826.5" y="1989.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="841.5" y="2004.2217">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="122" x="902.5" y="2003.1455">[Credenciales v&#225;lidas]</text><polygon fill="#444444" points="2626.5,2026.4297,2616.5,2030.4297,2626.5,2034.4297,2622.5,2030.4297" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2620.5" x2="3679.5" y1="2030.4297" y2="2030.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="2632.5" y="2025.5732">sessions.put(conn, user)</text><polygon fill="#444444" points="2887,2056.7813,2877,2060.7813,2887,2064.7813,2883,2060.7813" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2881" x2="3679.5" y1="2060.7813" y2="2060.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="2893" y="2055.9248">recordLogin(username)</text><polygon fill="#444444" points="1248.5,2087.1328,1238.5,2091.1328,1248.5,2095.1328,1244.5,2091.1328" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1242.5" x2="3679.5" y1="2091.1328" y2="2091.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="1254.5" y="2086.2764">broadcast({"type":"userlist", users})</text><polygon fill="#444444" points="930.5,2117.4844,920.5,2121.4844,930.5,2125.4844,926.5,2121.4844" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="1236.5" y1="2121.4844" y2="2121.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="936.5" y="2116.6279">frame userlist</text><polygon fill="#444444" points="930.5,2147.8359,920.5,2151.8359,930.5,2155.8359,926.5,2151.8359" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="3679.5" y1="2151.8359" y2="2151.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="936.5" y="2146.9795">{"type":"auth_ok","username":username}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="826.5" x2="3748.5" y1="2160.8359" y2="2160.8359"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="132" x="831.5" y="2172.2549">[Credenciales inv&#225;lidas]</text><polygon fill="#444444" points="930.5,2194.0234,920.5,2198.0234,930.5,2202.0234,926.5,2198.0234" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="3679.5" y1="2198.0234" y2="2198.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="936.5" y="2193.167">{"type":"auth_fail","msg":"bad credentials"}</text><polygon fill="#444444" points="930.5,2224.375,920.5,2228.375,930.5,2232.375,926.5,2228.375" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="3679.5" y1="2228.375" y2="2228.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229" x="936.5" y="2223.5186">close(code=1008, reason="Auth failed")</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5234" x="0" y="2264.5508"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="2264.5508" y2="2264.5508"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="2267.5508" y2="2267.5508"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="169" x="2532.5" y="2253.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="151" x="2538.5" y="2270.8701">(D) Mensajer&#237;a de Texto</text><polygon fill="#444444" points="235.5,2306.0781,245.5,2310.0781,235.5,2314.0781,239.5,2310.0781" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="32.5" x2="241.5" y1="2310.0781" y2="2310.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="39.5" y="2305.2217">Escribir mensaje y enviar</text><polygon fill="#444444" points="488.5,2336.4297,498.5,2340.4297,488.5,2344.4297,492.5,2340.4297" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="247.5" x2="494.5" y1="2340.4297" y2="2340.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="254.5" y="2335.5732">sendText(content)</text><polygon fill="#444444" points="907.5,2366.7813,917.5,2370.7813,907.5,2374.7813,911.5,2370.7813" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="913.5" y1="2370.7813" y2="2370.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="507.5" y="2365.9248">send({"type":"text","content":content})</text><polygon fill="#444444" points="1225.5,2397.1328,1235.5,2401.1328,1225.5,2405.1328,1229.5,2401.1328" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="919.5" x2="1231.5" y1="2401.1328" y2="2401.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="926.5" y="2396.2764">Frame {type:"text"}</text><polygon fill="#444444" points="2344,2427.4844,2354,2431.4844,2344,2435.4844,2348,2431.4844" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2350" y1="2431.4844" y2="2431.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="1244.5" y="2426.6279">dispatch("text")</text><polygon fill="#444444" points="3943.5,2457.8359,3953.5,2461.8359,3943.5,2465.8359,3947.5,2461.8359" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2356" x2="3949.5" y1="2461.8359" y2="2461.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="2363" y="2456.9795">handle(ctx,conn,payload)</text><polygon fill="#444444" points="2626.5,2488.1875,2616.5,2492.1875,2626.5,2496.1875,2622.5,2492.1875" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2620.5" x2="3954.5" y1="2492.1875" y2="2492.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="2632.5" y="2487.3311">sessions.get(conn) (verifica autenticado)</text><line style="stroke:#444444;stroke-width:1.0;" x1="3955.5" x2="3997.5" y1="2522.5391" y2="2522.5391"/><line style="stroke:#444444;stroke-width:1.0;" x1="3997.5" x2="3997.5" y1="2522.5391" y2="2535.5391"/><line style="stroke:#444444;stroke-width:1.0;" x1="3956.5" x2="3997.5" y1="2535.5391" y2="2535.5391"/><polygon fill="#444444" points="3966.5,2531.5391,3956.5,2535.5391,3966.5,2539.5391,3962.5,2535.5391" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="3962.5" y="2517.6826">Validar no vac&#237;o</text><polygon fill="#444444" points="2887,2561.8906,2877,2565.8906,2887,2569.8906,2883,2565.8906" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2881" x2="3954.5" y1="2565.8906" y2="2565.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="2893" y="2561.0342">recordText(username, content)</text><path d="M2881,2578.8906 L2881,2637.8906 L3226,2637.8906 L3226,2588.8906 L3216,2578.8906 L2881,2578.8906 " fill="#FFFFEE" style="stroke:#CCCC99;stroke-width:0.5;"/><path d="M3216,2578.8906 L3216,2588.8906 L3226,2588.8906 L3216,2578.8906 " fill="#FFFFEE" style="stroke:#CCCC99;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="2887" y="2597.3857">recordText:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="2895" y="2613.7373">1) insertAction("TEXT", actor_user_id)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="316" x="2895" y="2630.0889">2) insertTextDetails(action_id, content, content_length)</text><polygon fill="#444444" points="1248.5,2661.2969,1238.5,2665.2969,1248.5,2669.2969,1244.5,2665.2969" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1242.5" x2="3954.5" y1="2665.2969" y2="2665.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="438" x="1254.5" y="2660.4404">broadcast({"type":"text","from":username,"content":content,"timestamp":ts})</text><polygon fill="#444444" points="930.5,2691.6484,920.5,2695.6484,930.5,2699.6484,926.5,2695.6484" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="1236.5" y1="2695.6484" y2="2695.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="294" x="936.5" y="2690.792">Entrega broadcast a todos los clientes conectados</text><polygon fill="#444444" points="258.5,2722,248.5,2726,258.5,2730,254.5,2726" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="252.5" x2="918.5" y1="2726" y2="2726"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="270" x="264.5" y="2721.1436">Invoca MessageHandler &#8594; renderTextMessage</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5234" x="0" y="2755.1758"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="2755.1758" y2="2755.1758"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="2758.1758" y2="2758.1758"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="197" x="2518.5" y="2744"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="179" x="2524.5" y="2761.4951">(E) Transferencia de Archivo</text><polygon fill="#444444" points="235.5,2796.7031,245.5,2800.7031,235.5,2804.7031,239.5,2800.7031" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="32.5" x2="241.5" y1="2800.7031" y2="2800.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="39.5" y="2795.8467">Selecciona archivo local</text><polygon fill="#444444" points="488.5,2827.0547,498.5,2831.0547,488.5,2835.0547,492.5,2831.0547" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="247.5" x2="494.5" y1="2831.0547" y2="2831.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="254.5" y="2826.1982">sendFile(file)</text><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="542.5" y1="2861.4063" y2="2861.4063"/><line style="stroke:#444444;stroke-width:1.0;" x1="542.5" x2="542.5" y1="2861.4063" y2="2874.4063"/><line style="stroke:#444444;stroke-width:1.0;" x1="501.5" x2="542.5" y1="2874.4063" y2="2874.4063"/><polygon fill="#444444" points="511.5,2870.4063,501.5,2874.4063,511.5,2878.4063,507.5,2874.4063" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="507.5" y="2856.5498">Leer file &#8594; ArrayBuffer</text><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="542.5" y1="2904.7578" y2="2904.7578"/><line style="stroke:#444444;stroke-width:1.0;" x1="542.5" x2="542.5" y1="2904.7578" y2="2917.7578"/><line style="stroke:#444444;stroke-width:1.0;" x1="501.5" x2="542.5" y1="2917.7578" y2="2917.7578"/><polygon fill="#444444" points="511.5,2913.7578,501.5,2917.7578,511.5,2921.7578,507.5,2917.7578" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="292" x="507.5" y="2899.9014">Convertir a Base64 (FileUtils.arrayBufferToBase64)</text><polygon fill="#444444" points="907.5,2944.1094,917.5,2948.1094,907.5,2952.1094,911.5,2948.1094" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="913.5" y1="2948.1094" y2="2948.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="395" x="507.5" y="2943.2529">send({"type":"file","filename":fn,"mimetype":mt,"size":sz,"data":b64})</text><polygon fill="#444444" points="1225.5,2974.4609,1235.5,2978.4609,1225.5,2982.4609,1229.5,2978.4609" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="919.5" x2="1231.5" y1="2978.4609" y2="2978.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="926.5" y="2973.6045">Frame {type:"file"}</text><polygon fill="#444444" points="2344,3004.8125,2354,3008.8125,2344,3012.8125,2348,3008.8125" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2350" y1="3008.8125" y2="3008.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="1244.5" y="3003.9561">dispatch("file")</text><polygon fill="#444444" points="4065.5,3035.1641,4075.5,3039.1641,4065.5,3043.1641,4069.5,3039.1641" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2356" x2="4071.5" y1="3039.1641" y2="3039.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="2363" y="3034.3076">handle(ctx,conn,payload)</text><polygon fill="#444444" points="2626.5,3065.5156,2616.5,3069.5156,2626.5,3073.5156,2622.5,3069.5156" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2620.5" x2="4076.5" y1="3069.5156" y2="3069.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="2632.5" y="3064.6592">sessions.get(conn) (valida autenticado)</text><line style="stroke:#444444;stroke-width:1.0;" x1="4077.5" x2="4119.5" y1="3099.8672" y2="3099.8672"/><line style="stroke:#444444;stroke-width:1.0;" x1="4119.5" x2="4119.5" y1="3099.8672" y2="3112.8672"/><line style="stroke:#444444;stroke-width:1.0;" x1="4078.5" x2="4119.5" y1="3112.8672" y2="3112.8672"/><polygon fill="#444444" points="4088.5,3108.8672,4078.5,3112.8672,4088.5,3116.8672,4084.5,3112.8672" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="4084.5" y="3095.0107">Decodificar Base64 &#8594; bytes</text><polygon fill="#444444" points="2887,3139.2188,2877,3143.2188,2887,3147.2188,2883,3143.2188" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2881" x2="4076.5" y1="3143.2188" y2="3143.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="2893" y="3138.3623">recordFile(username, fn, mt, sz, bytes)</text><path d="M2881,3156.2188 L2881,3215.2188 L3339,3215.2188 L3339,3166.2188 L3329,3156.2188 L2881,3156.2188 " fill="#FFFFEE" style="stroke:#CCCC99;stroke-width:0.5;"/><path d="M3329,3156.2188 L3329,3166.2188 L3339,3166.2188 L3329,3156.2188 " fill="#FFFFEE" style="stroke:#CCCC99;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="2887" y="3174.7139">recordFile:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="2895" y="3191.0654">1) insertAction("FILE", actor_user_id)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="429" x="2895" y="3207.417">2) insertFileDetails(action_id, filename, mimetype, size, data LONGBLOB)</text><polygon fill="#444444" points="1248.5,3238.625,1238.5,3242.625,1248.5,3246.625,1244.5,3242.625" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1242.5" x2="4076.5" y1="3242.625" y2="3242.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="698" x="1254.5" y="3237.7686">broadcastExcept(sender,{"type":"file","from":username,"filename":fn,"mimetype":mt,"size":sz,"data":b64,"timestamp":ts})</text><polygon fill="#444444" points="930.5,3268.9766,920.5,3272.9766,930.5,3276.9766,926.5,3272.9766" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="1236.5" y1="3272.9766" y2="3272.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="936.5" y="3268.1201">Entrega a todos menos remitente</text><polygon fill="#444444" points="258.5,3299.3281,248.5,3303.3281,258.5,3307.3281,254.5,3303.3281" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="252.5" x2="918.5" y1="3303.3281" y2="3303.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="264.5" y="3298.4717">renderFileMessage</text><path d="M826.5,3318.3281 L891.5,3318.3281 L891.5,3326.6797 L881.5,3336.6797 L826.5,3336.6797 L826.5,3318.3281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="3316" x="826.5" y="3318.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="841.5" y="3332.8232">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="123" x="906.5" y="3331.7471">[Error Base64 inv&#225;lido]</text><polygon fill="#444444" points="2887,3355.0313,2877,3359.0313,2887,3363.0313,2883,3359.0313" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2881" x2="4076.5" y1="3359.0313" y2="3359.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="338" x="2893" y="3354.1748">recordSystem("ERROR - Base64 inv&#225;lido para archivo: fn")</text><polygon fill="#444444" points="930.5,3385.3828,920.5,3389.3828,930.5,3393.3828,926.5,3389.3828" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="4076.5" y1="3389.3828" y2="3389.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="936.5" y="3384.5264">{"type":"error","msg":"Archivo inv&#225;lido"}</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5234" x="0" y="3425.5586"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="3425.5586" y2="3425.5586"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="3428.5586" y2="3428.5586"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="190" x="2522" y="3414.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="172" x="2528" y="3431.8779">(F) Ingreso a Videollamada</text><polygon fill="#444444" points="235.5,3467.0859,245.5,3471.0859,235.5,3475.0859,239.5,3471.0859" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="32.5" x2="241.5" y1="3471.0859" y2="3471.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="39.5" y="3466.2295">Click bot&#243;n "Iniciar videollamada"</text><polygon fill="#444444" points="488.5,3497.4375,498.5,3501.4375,488.5,3505.4375,492.5,3501.4375" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="247.5" x2="494.5" y1="3501.4375" y2="3501.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="254.5" y="3496.5811">joinCall()</text><polygon fill="#444444" points="907.5,3527.7891,917.5,3531.7891,907.5,3535.7891,911.5,3531.7891" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="913.5" y1="3531.7891" y2="3531.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="507.5" y="3526.9326">send({"type":"join_room"})</text><polygon fill="#444444" points="1225.5,3558.1406,1235.5,3562.1406,1225.5,3566.1406,1229.5,3562.1406" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="919.5" x2="1231.5" y1="3562.1406" y2="3562.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="926.5" y="3557.2842">Frame {type:"join_room"}</text><polygon fill="#444444" points="2344,3588.4922,2354,3592.4922,2344,3596.4922,2348,3592.4922" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2350" y1="3592.4922" y2="3592.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="1244.5" y="3587.6357">dispatch("join_room")</text><polygon fill="#444444" points="4242.5,3618.8438,4252.5,3622.8438,4242.5,3626.8438,4246.5,3622.8438" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2356" x2="4248.5" y1="3622.8438" y2="3622.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="2363" y="3617.9873">handle(ctx,conn,payload)</text><polygon fill="#444444" points="2626.5,3649.1953,2616.5,3653.1953,2626.5,3657.1953,2622.5,3653.1953" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2620.5" x2="4253.5" y1="3653.1953" y2="3653.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="2632.5" y="3648.3389">sessions.get(conn) (obtener usuario)</text><polygon fill="#444444" points="2626.5,3679.5469,2616.5,3683.5469,2626.5,3687.5469,2622.5,3683.5469" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2620.5" x2="4253.5" y1="3683.5469" y2="3683.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="2632.5" y="3678.6904">videoRoomUsers.isEmpty()?</text><path d="M2769,3698.5469 L2830,3698.5469 L2830,3706.8984 L2820,3716.8984 L2769,3716.8984 L2769,3698.5469 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="1570" x="2769" y="3698.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="2784" y="3713.042">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="155" x="2845" y="3711.9658">[Primera persona en la sala]</text><polygon fill="#444444" points="2887,3735.25,2877,3739.25,2887,3743.25,2883,3739.25" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2881" x2="4253.5" y1="3739.25" y2="3739.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="2893" y="3734.3936">recordSystem("Videollamada iniciada")</text><polygon fill="#444444" points="2626.5,3772.6016,2616.5,3776.6016,2626.5,3780.6016,2622.5,3776.6016" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2620.5" x2="4253.5" y1="3776.6016" y2="3776.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="2632.5" y="3771.7451">videoRoomUsers.put(username, conn)</text><polygon fill="#444444" points="2887,3802.9531,2877,3806.9531,2887,3810.9531,2883,3806.9531" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2881" x2="4253.5" y1="3806.9531" y2="3806.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="2893" y="3802.0967">recordVideoJoin(username)</text><polygon fill="#444444" points="930.5,3833.3047,920.5,3837.3047,930.5,3841.3047,926.5,3837.3047" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="4253.5" y1="3837.3047" y2="3837.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="270" x="936.5" y="3832.4482">{"type":"room_users","users":currentRoomList}</text><polygon fill="#444444" points="1248.5,3863.6563,1238.5,3867.6563,1248.5,3871.6563,1244.5,3867.6563" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1242.5" x2="4253.5" y1="3867.6563" y2="3867.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="339" x="1254.5" y="3862.7998">Notificar otros {"type":"user_joined","username":username}</text><polygon fill="#444444" points="930.5,3894.0078,920.5,3898.0078,930.5,3902.0078,926.5,3898.0078" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="1236.5" y1="3898.0078" y2="3898.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243" x="936.5" y="3893.1514">Frame user_joined (otros clientes en sala)</text><polygon fill="#444444" points="488.5,3924.3594,498.5,3928.3594,488.5,3932.3594,492.5,3928.3594" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="247.5" x2="494.5" y1="3928.3594" y2="3928.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="254.5" y="3923.5029">handleRoomUsers(users)</text><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="542.5" y1="3958.7109" y2="3958.7109"/><line style="stroke:#444444;stroke-width:1.0;" x1="542.5" x2="542.5" y1="3958.7109" y2="3971.7109"/><line style="stroke:#444444;stroke-width:1.0;" x1="501.5" x2="542.5" y1="3971.7109" y2="3971.7109"/><polygon fill="#444444" points="511.5,3967.7109,501.5,3971.7109,511.5,3975.7109,507.5,3971.7109" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="507.5" y="3953.8545">getUserMedia(audio+video)</text><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="542.5" y1="4002.0625" y2="4002.0625"/><line style="stroke:#444444;stroke-width:1.0;" x1="542.5" x2="542.5" y1="4002.0625" y2="4015.0625"/><line style="stroke:#444444;stroke-width:1.0;" x1="501.5" x2="542.5" y1="4015.0625" y2="4015.0625"/><polygon fill="#444444" points="511.5,4011.0625,501.5,4015.0625,511.5,4019.0625,507.5,4015.0625" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="303" x="507.5" y="3997.2061">Crear RTCPeerConnections para cada usuario previo</text><polygon fill="#444444" points="907.5,4041.4141,917.5,4045.4141,907.5,4049.4141,911.5,4045.4141" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="913.5" y1="4045.4141" y2="4045.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279" x="507.5" y="4040.5576">send({"type":"webrtc_offer","to":peer,"offer":sdp})</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5234" x="0" y="4074.5898"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="4074.5898" y2="4074.5898"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="4077.5898" y2="4077.5898"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="343" x="2445.5" y="4063.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="325" x="2451.5" y="4080.9092">(G) Se&#241;alizaci&#243;n WebRTC (Oferta / Respuesta / ICE)</text><polygon fill="#444444" points="1225.5,4116.1172,1235.5,4120.1172,1225.5,4124.1172,1229.5,4120.1172" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="919.5" x2="1231.5" y1="4120.1172" y2="4120.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="926.5" y="4115.2607">Frame {type:"webrtc_offer"}</text><polygon fill="#444444" points="2344,4146.4688,2354,4150.4688,2344,4154.4688,2348,4150.4688" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2350" y1="4150.4688" y2="4150.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1244.5" y="4145.6123">dispatch("webrtc_offer")</text><polygon fill="#444444" points="4588.5,4176.8203,4598.5,4180.8203,4588.5,4184.8203,4592.5,4180.8203" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2356" x2="4594.5" y1="4180.8203" y2="4180.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="2363" y="4175.9639">handle(ctx,conn,payload)</text><polygon fill="#444444" points="2626.5,4207.1719,2616.5,4211.1719,2626.5,4215.1719,2622.5,4211.1719" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2620.5" x2="4599.5" y1="4211.1719" y2="4211.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="2632.5" y="4206.3154">videoRoomUsers.get(to)</text><polygon fill="#444444" points="930.5,4237.5234,920.5,4241.5234,930.5,4245.5234,926.5,4241.5234" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="4599.5" y1="4241.5234" y2="4241.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="289" x="936.5" y="4236.667">{"type":"webrtc_offer","from":caller,"offer":offerSdp}</text><polygon fill="#444444" points="511.5,4267.875,501.5,4271.875,511.5,4275.875,507.5,4271.875" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="505.5" x2="918.5" y1="4271.875" y2="4271.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="517.5" y="4267.0186">onMessage(offer)</text><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="542.5" y1="4302.2266" y2="4302.2266"/><line style="stroke:#444444;stroke-width:1.0;" x1="542.5" x2="542.5" y1="4302.2266" y2="4315.2266"/><line style="stroke:#444444;stroke-width:1.0;" x1="501.5" x2="542.5" y1="4315.2266" y2="4315.2266"/><polygon fill="#444444" points="511.5,4311.2266,501.5,4315.2266,511.5,4319.2266,507.5,4315.2266" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="507.5" y="4297.3701">setRemoteDescription(offerSdp)</text><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="542.5" y1="4345.5781" y2="4345.5781"/><line style="stroke:#444444;stroke-width:1.0;" x1="542.5" x2="542.5" y1="4345.5781" y2="4358.5781"/><line style="stroke:#444444;stroke-width:1.0;" x1="501.5" x2="542.5" y1="4358.5781" y2="4358.5781"/><polygon fill="#444444" points="511.5,4354.5781,501.5,4358.5781,511.5,4362.5781,507.5,4358.5781" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="507.5" y="4340.7217">createAnswer() &#8594; answerSdp</text><polygon fill="#444444" points="907.5,4384.9297,917.5,4388.9297,907.5,4392.9297,911.5,4388.9297" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="913.5" y1="4388.9297" y2="4388.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="362" x="507.5" y="4384.0732">send({"type":"webrtc_answer","to":caller,"answer":answerSdp})</text><polygon fill="#444444" points="1225.5,4415.2813,1235.5,4419.2813,1225.5,4423.2813,1229.5,4419.2813" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="919.5" x2="1231.5" y1="4419.2813" y2="4419.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="926.5" y="4414.4248">Frame {type:"webrtc_answer"}</text><polygon fill="#444444" points="2344,4445.6328,2354,4449.6328,2344,4453.6328,2348,4449.6328" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2350" y1="4449.6328" y2="4449.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="1244.5" y="4444.7764">dispatch("webrtc_answer")</text><polygon fill="#444444" points="4782.5,4475.9844,4792.5,4479.9844,4782.5,4483.9844,4786.5,4479.9844" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2356" x2="4788.5" y1="4479.9844" y2="4479.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="2363" y="4475.1279">handle(ctx,conn,payload)</text><polygon fill="#444444" points="2626.5,4506.3359,2616.5,4510.3359,2626.5,4514.3359,2622.5,4510.3359" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2620.5" x2="4793.5" y1="4510.3359" y2="4510.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="2632.5" y="4505.4795">videoRoomUsers.get(to)</text><polygon fill="#444444" points="930.5,4536.6875,920.5,4540.6875,930.5,4544.6875,926.5,4540.6875" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="4793.5" y1="4540.6875" y2="4540.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="343" x="936.5" y="4535.8311">{"type":"webrtc_answer","from":callee,"answer":answerSdp}</text><polygon fill="#444444" points="511.5,4567.0391,501.5,4571.0391,511.5,4575.0391,507.5,4571.0391" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="505.5" x2="918.5" y1="4571.0391" y2="4571.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="517.5" y="4566.1826">setRemoteDescription(answerSdp)</text><path d="M422,4586.0391 L495,4586.0391 L495,4594.3906 L485,4604.3906 L422,4604.3906 L422,4586.0391 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="230.8125" style="stroke:#000000;stroke-width:1.5;" width="4651" x="422" y="4586.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="437" y="4600.5342">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="307" x="510" y="4599.458">[Exchange ICE candidates until connectivity established]</text><polygon fill="#444444" points="907.5,4622.7422,917.5,4626.7422,907.5,4630.7422,911.5,4626.7422" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="913.5" y1="4626.7422" y2="4626.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="358" x="507.5" y="4621.8857">send({"type":"webrtc_ice","to":peer,"candidate":iceCandidate})</text><polygon fill="#444444" points="1225.5,4653.0938,1235.5,4657.0938,1225.5,4661.0938,1229.5,4657.0938" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="919.5" x2="1231.5" y1="4657.0938" y2="4657.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="926.5" y="4652.2373">Frame {type:"webrtc_ice"}</text><polygon fill="#444444" points="2344,4683.4453,2354,4687.4453,2344,4691.4453,2348,4687.4453" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2350" y1="4687.4453" y2="4687.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="1244.5" y="4682.5889">dispatch("webrtc_ice")</text><polygon fill="#444444" points="4969.5,4713.7969,4979.5,4717.7969,4969.5,4721.7969,4973.5,4717.7969" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2356" x2="4975.5" y1="4717.7969" y2="4717.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="2363" y="4712.9404">handle(ctx,conn,payload)</text><polygon fill="#444444" points="2626.5,4744.1484,2616.5,4748.1484,2626.5,4752.1484,2622.5,4748.1484" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2620.5" x2="4980.5" y1="4748.1484" y2="4748.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="2632.5" y="4743.292">videoRoomUsers.get(to)</text><polygon fill="#444444" points="930.5,4774.5,920.5,4778.5,930.5,4782.5,926.5,4778.5" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="4980.5" y1="4778.5" y2="4778.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="350" x="936.5" y="4773.6436">{"type":"webrtc_ice","from":sender,"candidate":iceCandidate}</text><polygon fill="#444444" points="511.5,4804.8516,501.5,4808.8516,511.5,4812.8516,507.5,4808.8516" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="505.5" x2="918.5" y1="4808.8516" y2="4808.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="517.5" y="4803.9951">addIceCandidate(iceCandidate)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5234" x="0" y="4845.0273"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="4845.0273" y2="4845.0273"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="4848.0273" y2="4848.0273"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="244" x="2495" y="4833.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="226" x="2501" y="4851.3467">(H) Salida de Videollamada Manual</text><polygon fill="#444444" points="235.5,4886.5547,245.5,4890.5547,235.5,4894.5547,239.5,4890.5547" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="32.5" x2="241.5" y1="4890.5547" y2="4890.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="39.5" y="4885.6982">Click "Salir de videollamada"</text><polygon fill="#444444" points="488.5,4916.9063,498.5,4920.9063,488.5,4924.9063,492.5,4920.9063" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="247.5" x2="494.5" y1="4920.9063" y2="4920.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="254.5" y="4916.0498">leaveCall()</text><polygon fill="#444444" points="907.5,4947.2578,917.5,4951.2578,907.5,4955.2578,911.5,4951.2578" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="913.5" y1="4951.2578" y2="4951.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="507.5" y="4946.4014">send({"type":"leave_room"})</text><polygon fill="#444444" points="1225.5,4977.6094,1235.5,4981.6094,1225.5,4985.6094,1229.5,4981.6094" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="919.5" x2="1231.5" y1="4981.6094" y2="4981.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="926.5" y="4976.7529">Frame {type:"leave_room"}</text><polygon fill="#444444" points="2344,5007.9609,2354,5011.9609,2344,5015.9609,2348,5011.9609" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2350" y1="5011.9609" y2="5011.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="1244.5" y="5007.1045">dispatch("leave_room")</text><polygon fill="#444444" points="4408.5,5038.3125,4418.5,5042.3125,4408.5,5046.3125,4412.5,5042.3125" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2356" x2="4414.5" y1="5042.3125" y2="5042.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="2363" y="5037.4561">handle(ctx,conn,payload)</text><polygon fill="#444444" points="2626.5,5068.6641,2616.5,5072.6641,2626.5,5076.6641,2622.5,5072.6641" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2620.5" x2="4419.5" y1="5072.6641" y2="5072.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="2632.5" y="5067.8076">videoRoomUsers.remove(username)</text><polygon fill="#444444" points="2887,5099.0156,2877,5103.0156,2887,5107.0156,2883,5103.0156" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2881" x2="4419.5" y1="5103.0156" y2="5103.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="2893" y="5098.1592">recordVideoLeave(username)</text><path d="M2769,5118.0156 L2830,5118.0156 L2830,5126.3672 L2820,5136.3672 L2769,5136.3672 L2769,5118.0156 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="1743" x="2769" y="5118.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="2784" y="5132.5107">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="131" x="2845" y="5131.4346">[Sala vac&#237;a tras retirada]</text><polygon fill="#444444" points="2887,5154.7188,2877,5158.7188,2887,5162.7188,2883,5158.7188" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2881" x2="4419.5" y1="5158.7188" y2="5158.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="2893" y="5153.8623">recordSystem("Videollamada finalizada")</text><polygon fill="#444444" points="1248.5,5192.0703,1238.5,5196.0703,1248.5,5200.0703,1244.5,5196.0703" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1242.5" x2="4419.5" y1="5196.0703" y2="5196.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="322" x="1254.5" y="5191.2139">Notificar otros {"type":"user_left","username":username}</text><polygon fill="#444444" points="930.5,5222.4219,920.5,5226.4219,930.5,5230.4219,926.5,5226.4219" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="1236.5" y1="5226.4219" y2="5226.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="936.5" y="5221.5654">Frame user_left a restantes</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5234" x="0" y="5255.5977"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="5255.5977" y2="5255.5977"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="5258.5977" y2="5258.5977"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="137" x="2548.5" y="5244.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="119" x="2554.5" y="5261.917">(I) Logout Expl&#237;cito</text><polygon fill="#444444" points="235.5,5297.125,245.5,5301.125,235.5,5305.125,239.5,5301.125" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="32.5" x2="241.5" y1="5301.125" y2="5301.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="39.5" y="5296.2686">Click "Logout"</text><polygon fill="#444444" points="488.5,5327.4766,498.5,5331.4766,488.5,5335.4766,492.5,5331.4766" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="247.5" x2="494.5" y1="5331.4766" y2="5331.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="254.5" y="5326.6201">logout()</text><polygon fill="#444444" points="907.5,5357.8281,917.5,5361.8281,907.5,5365.8281,911.5,5361.8281" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="500.5" x2="913.5" y1="5361.8281" y2="5361.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="507.5" y="5356.9717">send({"type":"logout"})</text><polygon fill="#444444" points="1225.5,5388.1797,1235.5,5392.1797,1225.5,5396.1797,1229.5,5392.1797" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="919.5" x2="1231.5" y1="5392.1797" y2="5392.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="926.5" y="5387.3232">Frame {type:"logout"}</text><polygon fill="#444444" points="2344,5418.5313,2354,5422.5313,2344,5426.5313,2348,5422.5313" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2350" y1="5422.5313" y2="5422.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="1244.5" y="5417.6748">dispatch("logout")</text><polygon fill="#444444" points="5126.5,5448.8828,5136.5,5452.8828,5126.5,5456.8828,5130.5,5452.8828" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2356" x2="5132.5" y1="5452.8828" y2="5452.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="2363" y="5448.0264">handle(ctx,conn,payload)</text><polygon fill="#444444" points="2887,5479.2344,2877,5483.2344,2887,5487.2344,2883,5483.2344" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2881" x2="5137.5" y1="5483.2344" y2="5483.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="2893" y="5478.3779">recordLogout(username)</text><polygon fill="#444444" points="930.5,5509.5859,920.5,5513.5859,930.5,5517.5859,926.5,5513.5859" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="924.5" x2="5137.5" y1="5513.5859" y2="5513.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="936.5" y="5508.7295">close(1000, "bye")</text><path d="M2452,5528.5859 L2517,5528.5859 L2517,5536.9375 L2507,5546.9375 L2452,5546.9375 L2452,5528.5859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="141.7578" style="stroke:#000000;stroke-width:1.5;" width="2772" x="2452" y="5528.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="2467" y="5543.0811">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="182" x="2532" y="5542.0049">[Usuario estaba en videollamada]</text><polygon fill="#444444" points="2626.5,5565.2891,2616.5,5569.2891,2626.5,5573.2891,2622.5,5569.2891" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2620.5" x2="5137.5" y1="5569.2891" y2="5569.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="2632.5" y="5564.4326">videoRoomUsers.remove(username)</text><polygon fill="#444444" points="2887,5595.6406,2877,5599.6406,2887,5603.6406,2883,5599.6406" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2881" x2="5137.5" y1="5599.6406" y2="5599.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="2893" y="5594.7842">recordVideoLeave(username)</text><path d="M2769,5614.6406 L2830,5614.6406 L2830,5622.9922 L2820,5632.9922 L2769,5632.9922 L2769,5614.6406 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="2445" x="2769" y="5614.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="2784" y="5629.1357">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="60" x="2845" y="5628.0596">[Sala vac&#237;a]</text><polygon fill="#444444" points="2887,5651.3438,2877,5655.3438,2887,5659.3438,2883,5655.3438" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2881" x2="5137.5" y1="5655.3438" y2="5655.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="2893" y="5650.4873">recordSystem("Videollamada finalizada")</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5234" x="0" y="5698.5195"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="5698.5195" y2="5698.5195"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="5701.5195" y2="5701.5195"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="304" x="2465" y="5687.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="286" x="2471" y="5704.8389">(J) Cierre de Conexi&#243;n Involuntario (onClose)</text><polygon fill="#444444" points="2603.5,5740.0469,2613.5,5744.0469,2603.5,5748.0469,2607.5,5744.0469" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2609.5" y1="5744.0469" y2="5744.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="1244.5" y="5739.1904">sessions.remove(conn)</text><path d="M1116.5,5759.0469 L1177.5,5759.0469 L1177.5,5767.3984 L1167.5,5777.3984 L1116.5,5777.3984 L1116.5,5759.0469 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="247.8125" style="stroke:#000000;stroke-width:1.5;" width="1886.5" x="1116.5" y="5759.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="1131.5" y="5773.542">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="166" x="1192.5" y="5772.4658">[Usuario autenticado al cerrar]</text><polygon fill="#444444" points="2864,5795.75,2874,5799.75,2864,5803.75,2868,5799.75" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2870" y1="5799.75" y2="5799.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241" x="1244.5" y="5794.8936">recordLogout(username) [si no registrado]</text><path d="M1126.5,5814.75 L1191.5,5814.75 L1191.5,5823.1016 L1181.5,5833.1016 L1126.5,5833.1016 L1126.5,5814.75 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="141.7578" style="stroke:#000000;stroke-width:1.5;" width="1866.5" x="1126.5" y="5814.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="1141.5" y="5829.2451">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="182" x="1206.5" y="5828.1689">[Usuario estaba en videollamada]</text><polygon fill="#444444" points="2603.5,5851.4531,2613.5,5855.4531,2603.5,5859.4531,2607.5,5855.4531" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2609.5" y1="5855.4531" y2="5855.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="1244.5" y="5850.5967">videoRoomUsers.remove(username)</text><polygon fill="#444444" points="2864,5881.8047,2874,5885.8047,2864,5889.8047,2868,5885.8047" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2870" y1="5885.8047" y2="5885.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="1244.5" y="5880.9482">recordVideoLeave(username)</text><path d="M1136.5,5900.8047 L1197.5,5900.8047 L1197.5,5909.1563 L1187.5,5919.1563 L1136.5,5919.1563 L1136.5,5900.8047 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="1846.5" x="1136.5" y="5900.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="1151.5" y="5915.2998">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="60" x="1212.5" y="5914.2236">[Sala vac&#237;a]</text><polygon fill="#444444" points="2864,5937.5078,2874,5941.5078,2864,5945.5078,2868,5941.5078" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2870" y1="5941.5078" y2="5941.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="1244.5" y="5936.6514">recordSystem("Videollamada finalizada")</text><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="1279.5" y1="5985.8594" y2="5985.8594"/><line style="stroke:#444444;stroke-width:1.0;" x1="1279.5" x2="1279.5" y1="5985.8594" y2="5998.8594"/><line style="stroke:#444444;stroke-width:1.0;" x1="1238.5" x2="1279.5" y1="5998.8594" y2="5998.8594"/><polygon fill="#444444" points="1248.5,5994.8594,1238.5,5998.8594,1248.5,6002.8594,1244.5,5998.8594" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="1244.5" y="5981.0029">broadcast({"type":"userlist", users})</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5234" x="0" y="6035.0352"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="6035.0352" y2="6035.0352"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="6038.0352" y2="6038.0352"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="189" x="2522.5" y="6023.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="171" x="2528.5" y="6041.3545">(K) Errores Representativos</text><path d="M2802,6063.2109 L2802,6089.2109 L4150,6089.2109 L4150,6073.2109 L4140,6063.2109 L2802,6063.2109 " fill="#FFFFEE" style="stroke:#CCCC99;stroke-width:0.5;"/><path d="M4140,6063.2109 L4140,6073.2109 L4150,6073.2109 L4140,6063.2109 " fill="#FFFFEE" style="stroke:#CCCC99;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="627" x="3158.25" y="6081.7061">Archivo con Base64 inv&#225;lido &#8594; recordSystem("ERROR - Base64 inv&#225;lido...") y mensaje de error al remitente.</text><path d="M851,6099.5625 L851,6125.5625 L3748,6125.5625 L3748,6109.5625 L3738,6099.5625 L851,6099.5625 " fill="#FFFFEE" style="stroke:#CCCC99;stroke-width:0.5;"/><path d="M3738,6099.5625 L3738,6109.5625 L3748,6109.5625 L3738,6099.5625 " fill="#FFFFEE" style="stroke:#CCCC99;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="321" x="2134.5" y="6118.0576">Credenciales inv&#225;lidas &#8594; auth_fail + cierre c&#243;digo 1008.</text><path d="M2170,6135.9141 L2170,6161.9141 L2542,6161.9141 L2542,6145.9141 L2532,6135.9141 L2170,6135.9141 " fill="#FFFFEE" style="stroke:#CCCC99;stroke-width:0.5;"/><path d="M2532,6135.9141 L2532,6145.9141 L2542,6145.9141 L2532,6135.9141 " fill="#FFFFEE" style="stroke:#CCCC99;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="351" x="2176" y="6154.4092">Tipo desconocido &#8594; {"type":"error","msg":"unknown type: X"}</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5234" x="0" y="6188.4414"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="6188.4414" y2="6188.4414"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="6191.4414" y2="6191.4414"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="221" x="2506.5" y="6177.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="203" x="2512.5" y="6194.7607">(L) Persistencia (Detalle Interno)</text><polygon fill="#444444" points="3503,6229.9688,3513,6233.9688,3503,6237.9688,3507,6233.9688" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2876" x2="3509" y1="6233.9688" y2="6233.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="373" x="2883" y="6229.1123">insertAction(action_type, room, actor_user_id, server_generated)</text><polygon fill="#444444" points="2887,6260.3203,2877,6264.3203,2887,6268.3203,2883,6264.3203" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2881" x2="3514" y1="6264.3203" y2="6264.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="2893" y="6259.4639">action_id</text><path d="M2769,6279.3203 L2830,6279.3203 L2830,6287.6719 L2820,6297.6719 L2769,6297.6719 L2769,6279.3203 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="154.0781" style="stroke:#000000;stroke-width:1.5;" width="843.5" x="2769" y="6279.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="2784" y="6293.8154">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="116" x="2845" y="6292.7393">[action_type == TEXT]</text><polygon fill="#444444" points="3503,6316.0234,3513,6320.0234,3503,6324.0234,3507,6320.0234" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2876" x2="3509" y1="6320.0234" y2="6320.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251" x="2883" y="6315.167">insertTextDetails(action_id, content, length)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2769" x2="3612.5" y1="6329.0234" y2="6329.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111" x="2774" y="6340.4424">[action_type == FILE]</text><polygon fill="#444444" points="3503,6362.2109,3513,6366.2109,3503,6370.2109,3507,6366.2109" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2876" x2="3509" y1="6366.2109" y2="6366.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="339" x="2883" y="6361.3545">insertFileDetails(action_id, filename, mimetype, size, data)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2769" x2="3612.5" y1="6375.2109" y2="6375.2109"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="376" x="2774" y="6386.6299">[action_type in (LOGIN, LOGOUT, VIDEO_JOIN, VIDEO_LEAVE, SYSTEM)]</text><line style="stroke:#444444;stroke-width:1.0;" x1="2876" x2="2918" y1="6412.3984" y2="6412.3984"/><line style="stroke:#444444;stroke-width:1.0;" x1="2918" x2="2918" y1="6412.3984" y2="6425.3984"/><line style="stroke:#444444;stroke-width:1.0;" x1="2877" x2="2918" y1="6425.3984" y2="6425.3984"/><polygon fill="#444444" points="2887,6421.3984,2877,6425.3984,2887,6429.3984,2883,6425.3984" style="stroke:#444444;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="2883" y="6407.542">No tabla detalle (solo registro base)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="5234" x="0" y="6461.5742"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="6461.5742" y2="6461.5742"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="5234" y1="6464.5742" y2="6464.5742"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2.0;" width="121" x="2556.5" y="6450.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="103" x="2562.5" y="6467.8936">(M) Fin del Flujo</text><polygon fill="#444444" points="2864,6503.1016,2874,6507.1016,2864,6511.1016,2868,6507.1016" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="1237.5" x2="2870" y1="6507.1016" y2="6507.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="409" x="1244.5" y="6502.2451">recordSystem("Servidor apag&#225;ndose...") (durante shutdown controlado)</text><polygon fill="#444444" points="3503,6533.4531,3513,6537.4531,3503,6541.4531,3507,6537.4531" style="stroke:#444444;stroke-width:1.0;"/><line style="stroke:#444444;stroke-width:1.0;" x1="2876" x2="3509" y1="6537.4531" y2="6537.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="2883" y="6532.5967">insertAction("SYSTEM", ...)</text><rect fill="#DDDDDD" height="186.0938" id="_legend" rx="7.5" ry="7.5" style="stroke:#000000;stroke-width:1.0;" width="627" x="2303" y="55.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="367" x="2308" y="75.1426">Este diagrama expone cada interacci&#243;n sin abreviaciones:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="376" x="2312" y="92.752">- Inicializaci&#243;n del servidor y construcci&#243;n de infraestructura</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="247" x="2312" y="110.3613">- Conexi&#243;n WebSocket desde el cliente</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="291" x="2312" y="127.9707">- Registro y autenticaci&#243;n (casos &#233;xito y error)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="368" x="2312" y="145.5801">- Env&#237;o de mensaje de texto (persistencia acci&#243;n + detalle)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="452" x="2312" y="163.1895">- Transferencia de archivo (decodificaci&#243;n Base64 y persistencia bytes)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="335" x="2312" y="180.7988">- Ingreso / salida de videollamada (inicio / fin de sala)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="383" x="2312" y="198.4082">- Se&#241;alizaci&#243;n WebRTC (oferta / respuesta / candidatos ICE)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="301" x="2312" y="216.0176">- Logout expl&#237;cito y cierre involuntario (onClose)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="613" x="2312" y="233.627">- Interacciones con DAOs y servicio de auditor&#237;a (insertAction, insertTextDetails, insertFileDetails)</text><!--SRC=[hLlTSkEs5RxNKs2OYv0DuztDf9b4KpTZo_AkjxBbaUJTTDgE1o8XYMkAO0X8jfFkRH-WRv3BNkn59u_WD-cJz1o0f02IekYqlbYHn3a7mFdvS720bP6C6JcFDnyukKcYHHJGa9C1NwSnavouKvPjev1dv2A9WeZ6qKyqY9v-JSX__l5FShAHB970iljqoH91Fx3iwHFL95cmYhPSg9TtKSXu7DCr3NNhY2_vHf8NP12nB6DUBsPBbeH4yhGt59AHCABB3EW9UqXvmaY0d54YMKO3tQc84aBd6Tj6C0eW4VqU-R8ssf35H1HJUIG1JuJCDa7H228N6MNgczna54KCGDY3Qd_FvbCUt349b0A8GLOGHp1pXdGJjeo0aODOQkl33QY0cJ_zwo6Is0nJv9c7FCDa-_I9OyThhIzybEm1DPwoJ810bi04I37BBu10qZXcYdsMqKGiMAPfW9LgBHCtP04FbHKrtoaLx9kleMzBwlnHCk5fFIqp9ZXOG82sGYLiQrh9ZL2JIB28bAQ0ZYhMANlwjw5XKD9aDY0kXt592lGWDzs0Il4ve4a8qYLeus8mLEovwS6kyTEdG2ieK5u0njZoU9D8ca77Bay6CHSi7svkUJGqMf6SdOm5S2hRuZXH6PiGn2aFXD53Ypm9973uHB_DGCzdeCqe5iMdyoXc-IUl1mwetR3N4tTHab9mGEZWnmqeZvs03UzdgoYuWn48ygg1v9fcu0DHIXD9Dad8iZXAc45dj5_JC8oI9NdrbT5-oX_Axo-Dxwhh0O_1Wp_xMlsPZG5CUIeV8PZfFLXqRVOu0LE0nxDB639Tibp6gxFV3xuT66HNNB9J6jmjCmxZpgdEuMyuh5Bn3EQLKmpWxxllUYjm6xBWNCxvGwz7SJpa1fHBg52_QeIzr52ESmeJGeeNv3pZODea_6i29WlPmz5AhcEV29mGMEc3y1oKKv3POWOhAa_ID0QlHpk3Z7CAGC4qJzvgivGXVKaJq4W6F5DGE69UejdUJ_EcUbybCuAZugryqHBqSuMT9uje2HmZniZRatSdjs_6qnaeG3s_dzvUZoUpVDoAT11J8MmPPwVGbB0Wd-lbe_WnFgEIJlac2nYvpZX6S3u8JMmBoDtWB18fbS5ApQ14CVcOCe3c5SKeA8IKb8s21cYK1uawX0ymAh2OWle9vsiqFRnZdFgmO41eQfcNOZcG3xOyrQnMd821j05D0P3u6Y286r6j-KrQMmhs2Ds10C3ZbK8Yd5incRpvzhhIjzAdvZDH0_Z371bqlmKT2EY1gnFdZLQLWCLIPbIovIDGVZPKVpr2AZEKgvm-dqNv3l8gn9Dyt2P3vLkT2T7DP33UwyI8UoQnyLudVikZ12rgCbI-rPb6Z6vPbQlwiSwcLvFnOc7FtlomZ-aa4VSsb_Lb7zj5O6bYzzem9xLqMHColm03vZ0A1e-FYNlYDQOZPMPrVDpJK46-_ACPzNsoPF8D5zBrm0dX-RsuvXcy6UGwl1Nb3WA0GdytAGOPewIA5UuAnFia1R4-2US-sO3ZmplqRlPYnbeVmYa0-9y-WXkktHsIgZKOwCTNv5xqNxn0OEiZdBrml5u2YmR9ekLA4hwmOzSK1xaRUUNjOkp8Z4JNcVvvEXjUEZx9m7UEdMNCvpI6LxNO75_TZ4P-FefRMByP1cDuF9lSOCP1lghBDJ81bwgssoZq8ITJiAOo0O8ZDrIXd_fe9ymM7ncnGT0L9GHkAn2O0u-_6uPlQSAoQucu_HA-N0Ci_AEZ8z_oEh1voLELS4dJFo2k-pcg_n4iFeyXqTSEUkgH0SsMj5nU8Q5godx1KSk57BieoFla119mSZCP4VVDR7PDNWzdNgyKXbwjr-0-f5iHEd3-ZatbEjl7V0wNDVTUt6InrojRJBtZRCMAtZ5ZNBhJcnHs2Y7hwhTN6xQbs6KnpMcVN5mhXtMy1eCF1QJGjCpNFyUrvNF2oUU5UJud00wGbM9I3_aupS0L1OhMIXw0NvUBBD3SY8tERnTgxqLZ4950_hBbNekYyuqPXKGhMszY9I7BfJPhlFGU3Es4hfbF5fiulb9F6EZte9Hz5X4WpVtPGTzn-auXol6TGfZJl_6TGfxJF_UTGgJJl_wunuRda4OMsvstq_7L7hyFysTtrt7LoMkhOPze5tS3-U2ZF_afVOmvXHdMQ550cGpi58MV3YYhvAf0y2ulSoj4HZyNLzFXP0O_ix62M-52B5lapHDJkRIRWDk2X_oT930ksEzjKgy7lbEwased0O0zH3SXZPFMgHTQLqFLKRgHhbAM6f2tZwyjd8h-SsU4tlkaT99dIGHKYvBI0CZQidWGambN3x9tyHYDNrzS5Ol5BSe7i3zM5ZYAGkodXFizeotyTvw1Gy7UNkv20yN4mE5e5OgFA6_draP83HC9Ee80La5GyEthqc2iXU4jlxCYiNZws6EnOCfVy9M0ZyIghFEREbd0wWZThCKodwQIIMFqi4VOlWELS3xsr7PPuHokivKwI8pMqRHODMa3E5sGeEZ1eIfMmFwFAFvcU8ijR_4F0HgYjXwQP4rSZNXLAWMvRPMRU9T-F0XaIa0LnAmzG0k0MNGLK3aqh_y9iQR3qN0m8xyZvvFnfVPlylxDS38i8_puUt9oTLOYvEsAYjNnznLCgynJuPd6COLW0zFYswTVi1mbm6Lhq-u0NpMURa1JO_k_H7mjqclTD0KWMlH0X5iQYv8sdUtjmGhlEGtpm9CW5CEwNLI0XJbGVSYENxry-ItavOmAdXohRIv1qInql1qsd7bMVHYoe9bA0lR3mL04MJIFiZBl0iX9jX7Dcj40ynKKYUw0KDCjhy5C17IGypZz_A4zVVaPcNFUmu6loAg1RstDMmBVeckC08Xa5G4USM4OglwxAqQ7l454fUztglgRmV97jZHu-iJh74qXf7IzovLAhH_SxY5ZljcpL-dPy8TPTP7ETs-jUxQyw_BXDcR9KgwCFLnjGYt1dNl48kFhNTJLFSHtPBJ64lSwTVeI8Q1roIyx8fH87d9Ss4HnbA3AsG35O2vX-vsvE6uvM3RVSUQJKGSf6SD2CqunRzG1D_JgPmNvYKnBq4rPp5IDdPO72p7q6- -FEQmRkOi8ZoUCW2j9HWo6YStvaL167qytMCfff8Or2NGe8UXfSNxXOWSt4cn-H7VSCwwRkqKvzeysXH-Dfei4S0_ifzlNO4qH_GHFuYVV2QcaJd_-pTUTG429FWm2YgmA0bR9hGK4BBg38A0FSom8g0cez7nM7XrbXThHMkgigCxSX0RA2uoT4op8e5K2-YnEd0xY0efen8NpYz6m5HUC8nmJ5mfpmr1oKyE0mCm-GHEJqVZgzUbeV6hWH6sgDPmOFWGinKeFnfnVSx0AQ3pJuPw9AGMImFe8_sPi7QaKUn-2Q9p0AHOumLD9XdWmMHYzI2Hmkz39xCKMS3YPZ2VaoveSB9wMI0BfKABsWpNHJIcAEZ4jqvC2kKh9vhxZt2iFCwbzqDnIJO5zqHsPSucx54SNQJFh_DDfnhmFF4e6D8xTRj23vBTOitGwmOb1VX1JThHLOAcLvbl0fKPx263uN6A15R9QjUq_8C6kX1v5OhXEvQFhVQyI_-iC71uy18-eSSrX2OcfEcS6DscKs-Q5bkdLuJMQKIUXpnaaRYgip2RPCyccmQX18BMnlMXaRjnw0v62E94d_m8IZaq6eIkHVmIRY8_DqWflkk8o1t8kCu05QzDoYou3UNdpng8HRCxB7KpE30wW19Uv2zXCNmne31VjTwLkbL94Swe0FeOqbooCg8jdVlmBPPXcQZpKoCXaDhXcU1nTx6M5XXnrMIJtK9BY5H7UALplsJoJmIt770FK93dixK6-x-WlVH6c4CSATLvx- -v1Z8jx41FZ7WHUVa0yEem1rXWEmu15NaK2-zIi1GPimfRWG2IGl8cXoQ4h-jGBP82tMNOwLJzJKAojczBIFCaNB5THDhk3O7B2rh28dp7SDwOgTIWaDxDWfLGoVKBeUYhZeUe5E9xZB9efzvPYRld7VYcn4_pR4ZlRFgUlLPVimy-s-f9DsS7y3HmjzYzLP3W0QrBI7XTej6x9vVLYpbC2kHbCSCamrCfhHm1G6yY3u-A4ATf6yf5WJCxZIAnO20lDCsmDG6_1GjcDquUcGV6cAaATpOr2Frebf5Ph8pdAjurjdbgtM9fOX1qCNMTeiRDMZpPodYFlLL5LGwMnQHXU68IkoMLKbDu0_fONrwob7uHkQ7mm-NEGFQjUUzkJziLuR-4PUP-YVqRYPz8V37k3k1hpzViLBSvG9svn2DXWy2qpiffcxhqvaI8ts37_0mjGNNM2pKn6SHS3ct-m0ZX7T_6D-TyYIjJIN6Q0pVAwvKqnMyZVc3KXAsnBCeGSp9UqyrvunIt8uUuMv467rIpEtkCGQEpgdbfIDzVCQG-xfIQikQHzGwRD7stAbkezDrBqHhvQgVhLovSlVUBC7n4ySUTR75kgjK1jFKmOG0UiI-qQ6etCdIE3a4figCFDZX8F1uCwxTpXw5illuADIBYx-t7HU1FNlh5KsoRcYj1R9lDisYX7mUH80FtHp5hokXYQ_4L4MAVUdJJ_3MHqCgRPLNSh7XhW7lCr6_2Gi2wMqxOh_grVLUbsMbNQ_a-UBW0nl5q8soG02QakeWWqj2hPSUp1gjZuLl6kgCpWZUnQ-KVNfxjKYewEZXoFF9gNubK52BsbB6qTxKfrkx5PfrJ-xkxkdYCodUSNvr_aY-BcUV3qQnWjES7JhCP-Z9kmioZ5Ypm2vio3OfvxAbURv2xXzucwNDidF-YwbPQjJ33ooBLvGTyzqxVzzONtH5y9CZMkt6Tt4xLlLqlp-gUkTcA6K2cSrc_9GIw_avQVrfhEMLPKLK0Ryc5W1Czir4dXmV4TEhmf3stmUBFI2rQ0k_Nocqh13Pr62LW6Rutu17x6DpEVlBiu6uvltuxnctuU3K_U3NsYhoPwJGEq57d52UuwQF7_EOWhUBoxmqNcL9ZvxQK7OQVlY-h_esD1Rnk0bDTBQKgNJxya8I2tZYytt6IOXH2nsiWGtHBrd_5O7HDqzxBTTKnrWUc_]--></g></svg>